// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

contract GlobalCapPolicy is IFaucetPolicy {
    /*//////////////////////////////////////////////////////////////
                                 TYPES
    //////////////////////////////////////////////////////////////*/


    /*//////////////////////////////////////////////////////////////
                            STATE VARIABLES
    //////////////////////////////////////////////////////////////*/
    uint256 public immutable globalCap;
    uint256 public immutable dripAmount;
    uint256 public totalDistributed;

    /*//////////////////////////////////////////////////////////////
                                 EVENTS
    //////////////////////////////////////////////////////////////*/


    /*//////////////////////////////////////////////////////////////
                                 ERRORS
    //////////////////////////////////////////////////////////////*/


/*CONSTRUCTOR*/
    constructor(uint256 _globalCap, uint256 _dripAmount) {
        globalCap = _globalCap;
        dripAmount = _dripAmount;
    }

    /*//////////////////////////////////////////////////////////////
                               FUNCTIONS
    //////////////////////////////////////////////////////////////*/

    function validateClaim(address user) public view override returns (bool) {
        return totalDistributed + dripAmount <= globalCap;
    }
    function afterClaim(address user) public override {
        totalDistributed += dripAmount;
    }
}